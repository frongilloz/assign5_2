{% extends "maintemplate.html" %}

{% block title %}Flowers{% endblock %}

{% block content %}
<body style="background-color: rgba(49,73,147,0.63)">

    <div style="padding-top: 100px; padding-left: 150px">
        <p><b>Choose the flower  of interest: </b></p>

        <div class="dropdown">

          <button class="btn btn-secondary dropdown-toggle" type="button" id="flowers_Dropdown_Button" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
            Flower Name
          </button>
            <select id="flowers_Dropdown" onchange="runFlower_Select()">
                  <div class="dropdown-menu" aria-labelledby="flowers_Dropdown_Button">

                      {% for i1, i2, i3 in itemsFlowers %}
                        <a class="dropdown-item" href="#" id="selected_Flower" >
                            <option value="{{ i3 }}">{{ i3 }}</option>
                        </a>
                      {% endfor %}

                  </div>
            </select>
        </div>

    <p style="padding-top: 15px">Show 10 Most Recent Sightings of Selected Flower:</p>
      <!--Display the 10 most recent sightings--->


    <p style="padding-top: 35px"><b>What would you like to do next?</b></p>

        <button type="button" class="btn btn-light">Update</button>
        <button type="button" class="btn btn-dark">Insert</button>

    </div>

    <div style="padding-left: 150px; padding-top: 50px">
        <input type="text" id="flowerSelect" placeholder="Get value on option select" style="padding-left: 15px"><br>
            <input type="text" id="queriedRes" placeholder="Wait" style="padding-left: 15px"><br>
    </div>

    <script>
        function runFlower_Select() {
            document.getElementById("flowerSelect").value = document.getElementById("flowers_Dropdown").value;

            var flSel = document.getElementById("flowerSelect").value;

            var db = openDatabase('flowers2019.db');

            //establish a connection with the database file
            conn = sqlite3.connect('flowers2019.db');
            //create a cursor to query the database; does NOT change
            cursorObj = conn.cursor();

            cursorObj.execute("SELECT * FROM SIGHTINGS s WHERE s.name = flSel");
            var items = cursorObj.fetchall();

            document.getElementById("queriedRes").value = items;
        
        }
    </script>


</body>

{% endblock %}